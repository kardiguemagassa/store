# Configuration de test pour l'application Store
spring.application.name=store-test

# Format de log structuré pour les tests
logging.pattern.console=%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n
# Configuration technique
spring.main.banner-mode=off
spring.output.ansi.enabled=NEVER

# Base de données H2
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA - Configuration H2
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.open-in-view=false

# Désactive les scripts SQL
spring.sql.init.mode=never

# JWT pour tests
jwt.secret=testSecretKeyForJwtTokenGenerationInTestEnvironmentOnly1234567890
jwt.expiration=3600000

# Stripe mock
STRIPE_API_KEY=sk_test_fake_key_for_testing
#stripe.api.key=sk_test_fake_key_for_testing
# Activer les tests d'intégration Stripe
#stripe.integration.test.enabled=true

# Contact info utilisé dans le config
contact.phone=+652185505
contact.email=test@example.com
contact.address=Test Address

# CORS
store.cors.allowed-origins=http://localhost:5173

# Logging
logging.level.com.store.store=INFO
logging.level.org.springframework=WARN
logging.level.org.hibernate=ERROR
logging.level.org.hibernate.tool.schema=ERROR
logging.level.org.springframework.security=WARN

# Cache
spring.cache.type=none

# Security désactiver certaines fonctionnalités pour les tests si nécessaire
spring.security.user.name=test
spring.security.user.password=test

# Localisation - Définir le français comme défaut
spring.web.locale=fr
spring.web.locale-resolver=fixed


# Configuration de logging pour les tests
logging.level.com.store.store.exception.GlobalExceptionHandler=WARN
logging.level.com.store.store.exception.ExceptionControllerTest=ERROR
logging.level.com.store.store.service=INFO
logging.level.com.store.store.controller=INFO
logging.level.com.store.store.security=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.transaction=WARN
logging.level.org.apache=WARN